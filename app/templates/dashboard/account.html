{% extends 'dashboard/base.html' %}

{% block title %}Teethnology Appointment{% endblock %}

{% block extra_css %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  .profile-card {
    border: 1px solid #d1e7dd;
    border-radius: 10px;
    padding: 20px;
    background-color: #f8fdfb;
  }
  .profile-img {
    width: 100px;
    height: 100px;
    border-radius: 10px;
    object-fit: cover;
  }
  .section-title {
    color: #007b83;
    font-weight: 600;
    margin-top: 20px;
  }
  input:disabled {
    background-color: #f8f9fa !important;
  }
</style>
{% endblock %}

{% block content %}
<div>
  {% if access_level == 'owner' %}
     <div class="container mt-4">
    <div class="profile-card p-4">
      <div class="row align-items-center mb-3">
        <div class="col-auto">
          <img src="https://via.placeholder.com/100" class="profile-img" alt="Profile Picture">
        </div>
        <div class="col">
          <h5>{{ user.name }}</h5>
          <p class="text-muted">{{ user.contact }}</p>
        </div>
        <div class="col text-end">
          <button id="editBtn" class="btn btn-teal btn-sm" onclick="enableEdit()">Edit</button>
        </div>
      </div>
      <hr>
      <!-- PERSONAL BACKGROUND -->
      <h6 class="section-title">Personal Background</h6>
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">Age:</label>
          <input type="text" class="form-control" value="{{ user.age }}" disabled>
        </div>
        <div class="col-md-4">
          <label class="form-label">Gender:</label>
          <input type="text" class="form-control" value="{{ user.gender }}" disabled>
        </div>
        <div class="col-md-4">
          <label class="form-label">Birthday:</label>
          <input type="date" class="form-control" value="{{ user.birthday }}" disabled>
        </div>
        <div class="col-md-4">
          <label class="form-label">Email:</label>
          <input type="email" class="form-control" value="{{ user.email }}" disabled>
        </div>
      </div>
      <hr>
      <!-- PROFESSIONAL BACKGROUND -->
      <h6 class="section-title">Professional Background</h6>
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">Licensed Number:</label>
          <input type="text" class="form-control" value="{{ user.license_number }}" disabled>
        </div>
        <div class="col-md-4">
          <label class="form-label">Department / Service Offered:</label>
          <input type="text" class="form-control" value="{{ user.department }}" disabled>
        </div>
        <div class="col-md-4">
          <label class="form-label">Shift Schedule:</label>
          <input type="text" class="form-control" value="{{ user.shift_schedule }}" disabled>
        </div>
      </div>
    </div>
  </div>
  {% elif access_level == 'staff' %}
    <div class="container mt-4">
      <div class="profile-card p-4">
        <div class="row align-items-center mb-3">
          <div class="col-auto">
            <img src="https://via.placeholder.com/100" class="profile-img" alt="Profile Picture">
          </div>
          <div class="col">
            <h5>{{ user.name }}</h5>
            <p class="text-muted">{{ user.contact }}</p>
          </div>
          <div class="col text-end">
            <button id="editBtn" class="btn btn-teal btn-sm" onclick="enableEdit()">Edit</button>
            </div>
        </div>

        <!-- Display limited or different fields -->
        <h6 class="section-title">Staff Info</h6>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Email:</label>
            <input type="email" class="form-control" value="{{ user.email }}" disabled>
          </div>
          <div class="col-md-6">
            <label class="form-label">Branch:</label>
            <input type="text" class="form-control" value="{{ user.branch }}" disabled>
          </div>
        </div>
      </div>
    </div>
  {% else %}
    <div class="text-center text-muted mt-5">Unauthorized access.</div>
  {% endif %}
</div>
{% endblock %}


{% block extra_js %}
<script>
  function enableEdit() {
    const inputs = document.querySelectorAll('input');
    inputs.forEach(input => input.removeAttribute('disabled'));
    document.getElementById('editBtn').innerText = 'Save';
    document.getElementById('editBtn').onclick = saveChanges;
  }

  function saveChanges() {
    const inputs = document.querySelectorAll('input');
    inputs.forEach(input => input.setAttribute('disabled', true));
    document.getElementById('editBtn').innerText = 'Edit';
    document.getElementById('editBtn').onclick = enableEdit;

    // Optional: Add fetch() or form submission here if needed
  }
</script>
{% endblock %}
